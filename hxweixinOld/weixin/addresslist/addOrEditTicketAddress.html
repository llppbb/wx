<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="email=no" />
    <!--禁止页面缩放-->
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" id="viewport" name="viewport">
    <title>
        <?php echo $title?>
    </title>
    <link rel="stylesheet" href="weixin/addresslist/css/getadress.css">
    <link rel="stylesheet" href="weixin/common/common.css">
</head>
<style>
    .bianjidizhi {
        display: block;
    }

    .footer1 {
        display: block;
    }

    .tishiColor::-webkit-input-placeholder {
        color: #E9054D;
        font-family: "微软雅黑";
    }

    .header {
        height: 0.4rem;
        width: 100%;
        text-align: center !important;
        line-height: 0.4rem;
        background: #FFFFFF;
        margin-bottom: 0.1rem;
    }

    .mengcengTishi {
        width: 100%;
        height: 100%;
        background: #333333;
        opacity: 0.9;
        position: fixed;
        left: 0px;
        top: 0px;
        display: none;
    }

    .mengcengTishi p {
        text-align: center;
        margin-top: 60%;
        color: #FFFFFF;
        font-size: 0.2rem;
    }

    .weidenglu_tishi {
        z-index: 30;
        position: fixed;
        left: 10%;
        top: 17%;
        width: 80%;
        background: #FFFFFF;
        border-radius: 0.14rem;
    }

    .weidenglu_tishi_title {
        text-align: center;
    }

    .weidenglu_tishi_bottom {
        border-top: 1px solid rgb(230, 230, 230);
        padding: 0.2rem 0.23rem;
    }

    .i_know {
        width: 80%;
        height: 0.4rem;
        border: 1px solid rgb(255, 221, 16);
        text-align: center;
        line-height: 0.4rem;
        border-radius: 0.2rem;
        margin: 0 auto;
        background: rgb(255, 221, 16);
    }

    .weidenglu_tishi_mobile p {
        text-align: center;
        font-size: 0.24rem !important;
        color: rgb(51, 51, 51);
        padding: 0 0 0.2rem;
    }

    .weidenglu_tishi_title_p2 {
        text-align: center;
        font-size: 0.2rem !important;
        color: rgb(51, 51, 51) !important;
        padding: .14rem !important;
        line-height: 0.21rem;
    }

    li input {
        width: 75%;
    }
    .weidenglu_tishi_bottom {
        border-top: 1px solid #e6e6e6;
        padding: 0.2rem 0.23rem;
        margin-bottom: 0rem;
    }

</style>

<body>
    <div class="wrap">
        <section class="section">
            <div class="bianjidizhi">
                <ul>
                    <li>收货人：<input type="text" id="receiverName" value="<?php echo $addressInfo['name']?>" placeholder="请输入收货人姓名"/></li>
                    <li>手机：<input type="number" id="receiverMobile" value="<?php echo $addressInfo['mobile']?>" placeholder="请输入11位手机号"/></li>
                    <li>详细地址：<input type="text" id="receiverAddress" value="<?php echo $addressInfo['address']?>" placeholder="请输入详细地址信息" /></li>
                </ul>
            </div>
        </section>
        <div class="mengcengTishi"></div>
        <div class="weidenglu_tishi zhifushibai" style="display: none;">
            <div class="weidenglu_tishi_title">
                <p class="weidenglu_tishi_title_p2">修改成功</p>
            </div>
            <div class="weidenglu_tishi_bottom">
                <div class="i_know">我知道了</div>
            </div>
        </div>
        <footer class="footer1" clicktf="true">
            <P>保存</P>
        </footer>
    </div>
    <div class="shezhi_tishi">
        <P>设置成功</P>
    </div>
    <script src="weixin/common/zepto.min.js"></script>
    <script src="weixin/common/fontSize.js"></script>
    <script src="weixin/common/jquery.js"></script>
    <script src="weixin/common/common.js"></script>
    <script>
    window.onpageshow = function(event) {
        if (event.persisted) {
            window.location.reload();
        }
    };
        var aid = "<?php echo $queryStr['aid']?>";
        var uid = "<?php echo $uid?>";
        var defaultValue = "<?php echo empty($addressInfo['defaultValue'])?'false':'true'?>";
        var type = "<?php echo $queryStr['addOrEditTicketAddress']?>";
        //提交 非空
        $(".footer1").click(function() {
            var receiverName = $("#receiverName").val();
            var receiverMobile = $("#receiverMobile").val();
            var receiverAddress = $("#receiverAddress").val();

            if (receiverName == "" && receiverMobile == "" && receiverAddress == "") {
                tishi("请填写完整的信息！");
                return false;
            } else if (receiverName == '') {
                tishi("请填写收货人姓名！");
                return false;
            } else if (!(/^(1[3-9]{1}\d{9})$/.test(receiverMobile))) {
                tishi("请填写正确的手机号！");
                return false;
            } else if (receiverAddress == '') {
                tishi("请填写收货地址！");
                return false;
            } else {
                if (type == 'edit') {
                    var identity = 'updateUserAddress';
                    var tishiText = "修改成功";
                } else if (type == 'add') {
                    var identity = 'addUserAddress';
                    var tishiText = "增加成功";
                }
                var data = {
                    'uid': uid,
                    'id': aid,
                    'defaultValue': defaultValue,
                    'name': receiverName,
                    'mobile': receiverMobile,
                    'address': receiverAddress,
                    'identity': identity
                }
                if($(this).attr("clicktf")=="true"){
                    $(this).css("background","#ccc");
                    $(this).attr("clicktf","false");
                $.post(WX_URL + 'requestAjax.php', data, function(res) {
                    if (res.state == "1") {
                        tishi(res.message);
                        $(this).css("background","rgb(255, 221, 16)");
                        $(this).attr("clicktf","false");
                        return;
                    }
                    $(".mengcengTishi").show();
                    $(".weidenglu_tishi_title_p2").text(tishiText);
                    $(".zhifushibai").show();
                });
            }
            }
        })

        $(".i_know").click(function(event) {
            $(".zhifushibai").hide();
            $(".mengcengTishi").hide();
            self.location = document.referrer;
        });
        // 禁用微信分享
              function onBridgeReady() {
                     WeixinJSBridge.call('hideOptionMenu');
                }

               if (typeof WeixinJSBridge == "undefined") {
                   if (document.addEventListener) {
                       document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
                   } else if (document.attachEvent) {
                       document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
                       document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
                   }
               } else {
                   onBridgeReady();
               }
    </script>
</body>

</html>
