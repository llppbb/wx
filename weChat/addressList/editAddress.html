<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="email=no" />
    <!--禁止页面缩放-->
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" id="viewport" name="viewport">
    <title>编辑收货地址</title>
    <link rel="stylesheet" href="weixin/addresslist/css/getadress.css">
</head>
<style>
    .bianjidizhi {
        display: block;
    }

    .footer1 {
        display: block;
    }

    .tishiColor::-webkit-input-placeholder {
        color: #E9054D;
        font-family: "微软雅黑";
    }

    .header {
        height: 0.4rem;
        width: 100%;
        text-align: center !important;
        line-height: 0.4rem;
        background: #FFFFFF;
        margin-bottom: 0.1rem;
    }

    .mengcengTishi {
        width: 100%;
        height: 100%;
        background: #333333;
        opacity: 0.9;
        position: fixed;
        left: 0px;
        top: 0px;
        display: none;
    }

    .mengcengTishi p {
        text-align: center;
        margin-top: 60%;
        color: #FFFFFF;
        font-size: 0.2rem;
    }

    .weidenglu_tishi {
        z-index: 30;
        position: fixed;
        left: 10%;
        top: 17%;
        width: 80%;
        background: #FFFFFF;
        border-radius: 0.14rem;
    }

    .weidenglu_tishi_title {
        text-align: center;
    }

    .weidenglu_tishi_bottom {
        border-top: 1px solid rgb(230, 230, 230);
        padding: 0.2rem 0.23rem;
    }

    .i_know {
        width: 80%;
        height: 0.4rem;
        border: 1px solid rgb(255, 221, 16);
        text-align: center;
        line-height: 0.4rem;
        border-radius: 0.2rem;
        margin: 0 auto;
        background: rgb(255, 221, 16);
    }

    .weidenglu_tishi_mobile p {
        text-align: center;
        font-size: 0.24rem !important;
        color: rgb(51, 51, 51);
        padding: 0 0 0.2rem;
    }

    .weidenglu_tishi_title_p2 {
        text-align: center;
        font-size: 0.2rem !important;
        color: rgb(51, 51, 51) !important;
        padding: 0.35rem 0.49rem 0.35rem !important;
        line-height: 0.21rem;
    }

    li input {
        width: 75%;
    }
</style>

<body>
    <div class="wrap">
        <input type="hidden" name="aid" id="aid" value="<?php echo $queryStr['aid']?>">
        <input type="hidden" name="uid" id="uid" value="<?php echo $uid?>">
        <input type="hidden" name="defaultValue" id="defaultValue" value="<?php echo empty($addressInfo['defaultValue'])?'false':'true'?>">
        <section class="section">
            <div class="bianjidizhi">
                <ul>
                    <li>收货人：<input type="text" id="consignee" value="<?php echo $addressInfo['name']?>" /></li>
                    <li>手机：<input type="number" id="mobile" value="<?php echo $addressInfo['mobile']?>" /></li>
                    <li>详细地址：<input type="text" id="address" value="<?php echo $addressInfo['address']?>" /></li>
                </ul>
            </div>
        </section>
        <div class="mengcengTishi"></div>
        <div class="weidenglu_tishi zhifushibai" style="display: none;">
            <div class="weidenglu_tishi_title">
                <p class="weidenglu_tishi_title_p2">修改成功</p>
            </div>
            <div class="weidenglu_tishi_bottom">
                <div class="i_know">我知道了</div>
            </div>
        </div>
        <footer class="footer1">
            <P>保存</P>
        </footer>
    </div>
    <script src="weixin/common/zepto.min.js"></script>
    <script src="weixin/common/fontSize.js"></script>
    <script src="weixin/common/common.js"></script>
    <script>
        var aid = $('#aid').val();
        var uid = $('#uid').val();
        var defaultValue = $("#defaultValue").val();
        //提交 非空
        $(".footer1").click(function() {
            var sMobile = $("#mobile").val();

            if ($("#consignee").val() == "") {
                $("#consignee").attr('placeholder', '收货人姓名不能为空');
                $("#consignee").addClass('tishiColor');
                return false;
            }
            if (!(/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/.test(sMobile))) {
                $('#mobile').val('');
                $('#mobile').attr('placeholder', '请输入11位手机号');
                $('#mobile').addClass('tishiColor');
                return false;
            }
            if ($('#address').val() == "") {
                $('#address').attr('placeholder', '请输入详细地址信息');
                $('#address').addClass('tishiColor');
                return false;
            } else {
                var data = {
                    'uid': uid,
                    'id': aid,
                    'defaultValue': defaultValue,
                    'name': $('#consignee').val(),
                    'mobile': $('#mobile').val(),
                    'address': $('#address').val(),
                }
                $.post(WX_URL + 'editAddress.php', data, function(res) {
                    if (res.state == "1") {
                        alert(res.message);
                        return;
                    }
                    $(".mengcengTishi").show();
                    $(".zhifushibai").show();
                });
            }
        })

        $(".i_know").click(function(event) {
            $(".zhifushibai").hide();
            location.href = WX_URL + "addressList.php";
        });
        // 禁用微信分享
              function onBridgeReady() {
                     WeixinJSBridge.call('hideOptionMenu');
                }

               if (typeof WeixinJSBridge == "undefined") {
                   if (document.addEventListener) {
                       document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
                   } else if (document.attachEvent) {
                       document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
                       document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
                   }
               } else {
                   onBridgeReady();
               }
    </script>
</body>

</html>
